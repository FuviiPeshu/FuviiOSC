<Window x:Class="FuviiOSC.AvatarChanger.UI.AvatarChangerTriggerInstanceEditWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:utils="clr-namespace:VRCOSC.App.SDK.Utils;assembly=VRCOSC.App"
    xmlns:common="clr-namespace:FuviiOSC.Common"
    xmlns:queryableParameter="clr-namespace:VRCOSC.App.UI.Views.Modules.Settings.QueryableParameter;assembly=VRCOSC.App"
    xmlns:core="clr-namespace:VRCOSC.App.UI.Core;assembly=VRCOSC.App"
    mc:Ignorable="d"
    MinWidth="512" MinHeight="256" Width="1200" Height="512"
    Title="Edit Trigger">
    <Window.Resources>
        <core:AlternatingColourConverterMulti x:Key="AlternatingColourConverter" />
        <core:BindingProxy x:Key="CBackground3Proxy" Data="{DynamicResource CBackground3}"/>
        <core:BindingProxy x:Key="CBackground4Proxy" Data="{DynamicResource CBackground4}"/>
    </Window.Resources>
    <Border Padding="10" Background="{DynamicResource CBackground2}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <StackPanel Grid.Row="0" Margin="0 0 0 10">
                <TextBlock Text="Trigger Name" Foreground="{StaticResource CForeground2}" FontSize="14" FontWeight="Bold" Margin="0 5 0 2" />
                <TextBlock Text="Friendly name to display on the trigger list :3" Foreground="{StaticResource CForeground2}" FontSize="12" Margin="0 0 0 5" />
                <TextBox Text="{Binding TriggerName.Value, UpdateSourceTrigger=PropertyChanged}"
                         Background="{StaticResource CBackground3}" Foreground="{StaticResource CForeground1}"
                         FontSize="16" Padding="5"
                         HorizontalAlignment="Stretch" VerticalContentAlignment="Center" />
                
                <TextBlock Text="Avatar ID" Foreground="{StaticResource CForeground2}" FontSize="14" FontWeight="Bold" Margin="0 15 0 2" />
                <TextBlock Text="ID of the avatar you want to change to (example: avtr_26187637-0c30-4a09-86e1-bc928c07309e)" Foreground="{StaticResource CForeground2}" FontSize="12" Margin="0 0 0 5" TextWrapping="Wrap" />
                <TextBox Text="{Binding AvatarId.Value, UpdateSourceTrigger=PropertyChanged}"
                         Background="{StaticResource CBackground3}" Foreground="{StaticResource CForeground1}"
                         FontSize="16" Padding="5"
                         HorizontalAlignment="Stretch" VerticalContentAlignment="Center" />
                
                <Border Background="{DynamicResource CBackground1}" Height="30" Margin="0 15 0 0">
                    <TextBlock
                        Margin="5"
                        Text="OSC parameters (OR / at least one must be true)"
                        Foreground="{StaticResource CForeground2}"
                        TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"
                        FontSize="16" VerticalAlignment="Center"
                        TextAlignment="Center" />
                </Border>
            </StackPanel>
            
            <ListView Grid.Row="1" ItemsSource="{Binding QueryableParameters}" AlternationCount="2">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <Border Padding="5">
                                        <Border.Background>
                                            <MultiBinding Converter="{StaticResource AlternatingColourConverter}">
                                                <Binding RelativeSource="{RelativeSource Mode=TemplatedParent}" Path="(ItemsControl.AlternationIndex)" />
                                                <Binding Source="{StaticResource CBackground3Proxy}" Path="Data"/>
                                                <Binding Source="{StaticResource CBackground4Proxy}" Path="Data"/>
                                            </MultiBinding>
                                        </Border.Background>
                                        <Grid>
                                            <queryableParameter:QueryableParameterView QueryableParameter="{Binding}"/>
                                            <Button Grid.Column="1" Content="-" Background="#FFD32F2F" Foreground="White"
                                                    Click="RemoveButton_OnClick" Height="30" Width="30" Tag="{Binding}" 
                                                    FontWeight="Bold" HorizontalAlignment="Right" />
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
            
            <Border Grid.Row="2" Background="{DynamicResource CBackground1}" Margin="0 10 0 0">
                <Button Content="Add Parameter" Width="120" Height="25" Margin="0 5" Click="AddButton_OnClick" 
                        Background="#FF388E3C" Foreground="White" />
            </Border>
        </Grid>
    </Border>
</Window>